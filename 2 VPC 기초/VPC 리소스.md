# VPC 리소스

## 1. 서브넷

### 1.1. 서브넷 개념 
- 클라우드 환경의 VPC에서도 서브넷을 통해 네트워크를 분리할 수 있다.
- 서브넷 IP 대역은 VPC의 IP 대역에 속해 있어야 하며, 서브넷은 1개의 가용 영역에 종속되어야 한다.
- AWS에는 서브넷에 할당할 수 있는 IP 대역에서 미리 예약되어 있는 IP 주소가 있다.
  - 이러한 예약된 IP 주소들은 AWS 자원에게 할당할 수 없다.
  - 첫 번째 주소 : 네트워크 주소
  - 두 번째 주소 : AWS VPC 가상 라우터 주소
  - 세 번째 주소 : AWS DNS 서버 주소
  - 네 번째 주소 : 향후 새로운 기능에 활용할 주소
  - 마지막 주소 : 네트워크 브로드캐스트 주소

### 1.2. 퍼블릭 서브넷과 프라이빗 서브넷
- **퍼블릭 서브넷**은 공인 네트워크 개념으로, 외부 인터넷 구간과 직접 통신할 수 있는 공공 네트워크이다.
- **프라이빗 서브넷**은 사설 네트워크 개념으로, 외부 인터넷 구간과 직접 통신할 수 없는 폐쇄적인 네트워크이다.

## 2. 가상 라우터와 라우팅 테이블
- VPC를 생성하면 자동으로 가상 라우터가 생성된다.
- 이 가상 라우터는 라우팅 테이블을 가지고 있어 목적지 네트워크로 라우팅하여 통신한다.
- 가상 라우터는 최초에 기본 라우팅 테이블을 보유하고 있으며, 로컬 네트워크에 대한 라우팅 경로만 잡혀 있다.
  - 로컬 네트워크는 VPC의 자체 대역으로, VPC 내에 생성된 서브넷은 라우팅 테이블의 로컬 네트워크에 의해 통신이 가능하다.

## 3. 인터넷 게이트웨이
- **인터넷 게이트웨이**는 VPC와 인터넷 간의 논리적인 연결이다.
- 인터넷 게이트웨이는 VPC 당 1개만 생성할 수 있다.
- 인터넷 게이트웨이를 통해 외부 인터넷 구간으로 통신할 수 있는 대상은 퍼블릭 IP를 사용하는 퍼블릭 서브넷 내의 자원이다.
  - 이러한 퍼블릭 서브넷은 자신의 라우팅 테이블에 외부 인터넷 구간으로 나가는 타깃을 인터넷 게이트웨이로 지정해주어야 한다.

## 4. NAT 게이트웨이
- **NAT 게이트웨이**도 인터넷 게이트웨이처럼 외부 인터넷 구간과 연결하는 역할을 한다.
- NAT 게이트웨이는 프라이빗 IP를 퍼블릭 IP로 변환하여 인터넷 구간과 통신할 수 있게 한다.

## 5. 보안 그룹과 네트워크 ACL
- VPC는 인스턴스 레벨과 서브넷 레벨상에서 대상을 필터링할 수 있는 보안 기술을 사용할 수 있다.
- 인스턴스 레벨에서의 보안 기술은 **보안 그룹**이며, 서브넷 레벨에서의 보안 기술은 **네트워크 ACL**이다